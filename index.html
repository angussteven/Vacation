<!DOCTYPE HTML>
<html lang="eng">

<HEAD>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Vacation</title>

  <!--Linked CSS files-->
  <link rel="stylesheet" href="css/foundation.css">
  <link href='css/fullcalendar.css' rel='stylesheet' />
  <link href='css/fullcalendar.print.css' rel='stylesheet' media='print' />
  <link rel="stylesheet" href="css/app.css">

  <!--Linked JS files-->
	<link href='css/fullcalendar.css' rel='stylesheet' />
	<link href='css/fullcalendar.print.css' rel='stylesheet' media='print' />

   <!--FIREBASE_DATABASE-->
  <script src="https://www.gstatic.com/firebasejs/3.2.1/firebase.js"></script>
  <script src="js/DBConfig.js"></script>
  <script src="js/RestService.js"></script>
  <!--END OF DATABASE SCRIPTS-->
  	
	<!--Linked JS files-->

  <script src='js/moment.min.js'></script>
  <script src='js/jquery.min.js'></script>
  <script src='js/jquery-ui.custom.min.js'></script>

  <!--FIREBASE_DATABASE-->
  <script src="https://www.gstatic.com/firebasejs/3.2.1/firebase.js"></script>
  <script src="js/DBConfig.js"></script>
  <script src="js/RestService.js"></script>

  <!--Foundation JS-->
  <script src="js/vendor/what-input.js"></script>
  <script src="js/vendor/jquery.js"></script>
  <script src="js/vendor/foundation.min.js"></script>
  <script src="js/app.js"></script>

	<script>
 		$(document).foundation();
	</script>
	<!--Sources are Foundation and for calendar: http://fullcalendar.io/-->

<!--Create calendar on page load-->
<script>
  function addDay(day) {
    day = day.split('-');
    day[2] = parseInt(day[2]);
    day[2]+=1;
    day = day[0] + '-' + day[1] + '-' + day[2];
    return day;
  };
  function subtractDay(day) {
    day = day.split('-');
    day[2]-='1';
    day = day[0] + '-' + day[1] + '-' + day[2];
    return day;
  }
  function Account(GMIN, First, Last, Email, Manager, TotalVacation, UsedVacation) {
    this.GMIN = GMIN;
    this.First = First;
    this.Last = Last;
    this.Email = Email;
    this.Manager = Manager;
    this.TotalVacation = TotalVacation;
    this.UsedVacation = UsedVacation;
  };
  function loadProfile(account) {
    $("#GMIN").val(account.GMIN);
    $("#firstName").val(account.First);
    $("#lastName").val(account.Last);
    $("#emailAddress").val(account.Email);
    $("#manager").val(account.Manager);
    $("#totalVacationDays").val(account.TotalVacation);
    $("#usedVacationDays").val(account.UsedVacation);
  }; 
  var id = 0;
  var oneDay = false;
	$(document).ready(function() {
    var popup2 = new Foundation.Reveal($('#viewProfileModal'));
    var popup3 = new Foundation.Reveal($('#addEventModal'));
    var popup4 = new Foundation.Reveal($("#viewEventModal"));
    var eventData;
    var title;
    var clickedID;
		$('#calendar').fullCalendar({
			header: {
				left: '',
				center: 'title',
				right: 'prev,next today'
			},
      theme: false,
      weekends: false,
			selectable: true,
			selectHelper: true,
			select: function(start, end) {
				title = $("#firstName").val() + ' ' + $("#lastName").val();
				if (title) {

		          popup3.open();
		          $("#startDate").val(start.toISOString());
		          console.log(oneDay);
		          if (oneDay){
		            $("#endDate").val(start.toISOString());
		          } else {

		            $("#endDate").val(subtractDay(end.toISOString()));
		          }
				}
				$('#calendar').fullCalendar('unselect');
			},
      eventClick: function(event) {
        if (event.url) {
          clickedID = event.id;
          $("#eventTitle").val(event.title);
          $("#viewStartDate").val(event.start.toISOString());
          $("#viewEndDate").val(event.end.toISOString());

          popup4.open();
          return false;
        }
      },
			editable: false,
			eventLimit: true, // allow "more" link when too many events

      dayClick: function(date) {
        $("#daysSelected").val(1);
        oneDay = true;
      }
//			events: [
//				{
//					title: 'All Day Event',
//					start: '2016-06-01'
//				},
//				{
//					title: 'Long Event',
//					start: '2016-06-07',
//					end: '2016-06-10'
//				},
//				{
//					id: 999,
//					title: 'Repeating Event',
//					start: '2016-06-09T16:00:00'
//				},
//				{
//					id: 999,
//					title: 'Repeating Event',
//					start: '2016-06-16T16:00:00'
//				},
//				{
//					title: 'Conference',
//					start: '2016-06-11',
//					end: '2016-06-13'
//				},
//				{
//					title: 'Meeting',
//					start: '2016-06-12T10:30:00',
//					end: '2016-06-12T12:30:00'
//				},
//				{
//					title: 'Lunch',
//					start: '2016-06-12T12:00:00'
//				},
//				{
//					title: 'Meeting',
//					start: '2016-06-12T14:30:00'
//				},
//				{
//					title: 'Happy Hour',
//					start: '2016-06-12T17:30:00'
//				},
//				{
//					title: 'Dinner',
//					start: '2016-06-12T20:00:00'
//				},
//				{
//					title: 'Birthday Party',
//					start: '2016-06-13T07:00:00'
//				},
//				{
//					title: 'Click for Google',
//					url: 'http://google.com/',
//					start: '2016-06-28'
//				}
//			]
		});
		$("#viewProfileBtn").click(function () {
			popup2.open();
		});
		$("#viewCloseBtn").click(function () {
			popup2.close();
		});
    $("#cancelBtn").click(function() {
      var ans = confirm("Are you sure you want to cancel? All progress will be reset.");
      if (ans == true)
        popup2.close();
    });
    $("#addCloseBtn").click(function () {
    	oneDay = false;
      popup3.close();
    });
    $("#notifyBtn, #changeEventBtn").click(function() {
      id+=1;
      eventData = {
        id: id,
        title: title,
        start: $("#startDate").val(),
        end: addDay($("#endDate").val()),
        url: 'click'
      };
      $('#calendar').fullCalendar('renderEvent', eventData, true);
      popup3.close();
      
      //ICS File
      radioStart = $('input:radio[name=start]:checked').val();
      radioEnd = $('input:radio[name=end]:checked').val();
      startDay = $("#startDate").val().split('-');
      startDay = startDay[0] + startDay[1] + startDay[2];
      endDay = $("#endDate").val().split('-');
      console.log(endDay);

      if (endDay[2] === 01){//if the day is 1 it is actually the last day of the previous month
        console.log(endDay + "endDay[2] === 01");
        switch (endDay[1]){//switching on month
          case 01: 
              endDay = (endDay[0] - 1) + "12" + "31";
            break;

          case 03: 
            if ((endDay[0] % 4 == 0) && (endDay[0] % 100 != 0) || (endDay[0] % 400 == 0)){
              endDay = endDay[0] + "02" + "29";
            } else {
              endDay = endDay[0] + "02" + "28";
            }
            
            break;

          case 05: case 07: case 08: case 10: case 12:
            endDay = endDay[0] + (endDay[1] - 1) + "30";
            break;

          default:
            endDay = endDay[0] + (endDay[1] - 1) + "31";
            break;
        }
      } 
>>>>>>> database-backend

  <script src="js/login.js"></script>
  <script src="js/logincontroller.js"></script>
  <!--Sources are Foundation and for calendar: http://fullcalendar.io/-->
</HEAD>

<body>
  <div id="header">
    Vacation Calendar
  </div>
  <div id="sidebar">
    <div class="row">
      <div class="panel text-center">
        <img class="circle" src="img/82.jpg">
        <h4>Jane Wozniak</h4>
        <p>Director of Resources</p>
        <hr>
      </div>
    </div>
    <form>
      <div class="row">
        <div class="panel text-center">
          <label>Select Employees To View</label>
          <select id="emp-dropdown">
	              <option value="husker">All</option>
	              <option value="starbuck">Employees Under Manager</option>
	              <option value="hotdog">Manager</option>
	              <option value="apollo">?</option>
	            </select>
          <br />
          <br />
          <a href="#features" class="button">Delete Event</a>
          <a href="" onclick="fireSignOut()" class="button">Sign Out</a>

        </div>
      </div>
    </form>
  </div>
  <div id="wrapper">
    <div id="loginWrap">
      <div class="row align-center">
        <div class="large-6 large-centered columns">
          <div class="login-box">
            <h1 id="title">Login</h1>
            <!--Form to select your account and continue to the next page-->
            <div class="row align-center">
              <div class="large-12 columns">

                <form id="loginForm">
                  <div class="row">
                    <div class="large-12 columns">
                      <label>Email
                  <input id="email" type="text" placeholder="Email" />
                </label>
                    </div>
                  </div>
                  <div class="row">
                    <div class="large-12 columns">
                      <label>Password
                  <input id="password" type="password" placeholder="Password" />
                </label>
                    </div>
                  </div>
                  <button type="submit" id="loginBtn" onclick="logIn()" class="success button" unselectable="on">Log In</button>

                </form>
                <button id="newUserBtn" class="button" unselectable="on">Create New Profile</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div id='wrap'>
      <div id='calendar'></div>
      <div style='clear:both'></div>
      <!--<span class="text-center">Select the date(s) you would like to take off</span>-->
    </div>
  </div>
  <div id="viewProfileModal" class="reveal-modal large-centered" data-reveal aria labelledby="modalTitle" aria-hidden="true"
    role="dialog" data-close-on-click="false">
    <div class="callout secondary" data-closeable>
      <h1>View Profile</h1>
      <div class="row">
        <div class="large-4 medium-4 columns">
          <label>First Name</label>
          <input id="firstName" type="text" value="Robert" />
        </div>
        <div class="large-4 medium-4 columns">
          <label>Last Name</label>
          <input id="lastName" type="text" value="Kasper" />
        </div>
        <div class="large-4 medium-4 columns">
          <label>Email Address</label>
          <input type="email" value="robert.kasperiv@gm.com" />
        </div>
      </div>
      <div class="row">
        <div class="large-6 medium-4 columns">
          <label>GMIN</label>
          <input id="GMIN" type="number" value="242348733" />
        </div>
        <div class="large-6 medium-4 columns">
          <label>Manager</label>
          <input type="text" value="Michael Eilers" />
        </div>
      </div>
      <div class="row">
        <div class="large-2 medium-4 columns">
          <label>Total Vacation Days</label>
          <input type="number" value="15" />
        </div>
        <div class="large-2 medium-4 columns">
          <label>Used Vacation Days</label>
          <input id="userDays" type="number" value="3" readonly/>
        </div>
        <div class="large-8 medium-4 columns">
        </div>
      </div>
      <div class="row">
        <button id="submitBtn" class="success button" unselectable="on">Submit</button>
        <button id="cancelBtn" class="alert button" unselectable="on">Cancel</button>
      </div>
      <button id="viewCloseBtn" class="close-button" type="button" unselectable="on">
          <span aria-hidden="true">&times;</span>
        </button>
    </div>
  </div>
  <div id="addEventModal" class="reveal-modal large-centered" data-reveal aria-labelledby="modalTitle" aria-hidden="true" role="dialog"
    data-close-on-click="false">
    <div class="callout secondary" data-closeable>
      <h1>Add Vacation Time</h1>
      <div class="row">
        <div class="large-6 medium-4 columns">
          <label>Title (Default is your name)</label>
          <input class="fullWidth" type="input" id="createEventTitle" />
          <label>Description</label>
          <input class="fullWidth" type="input" id="createEventDescription" />
        </div>
        <div class="large-2 medium-4 columns">
          <label>Vacation Days Selected</label>
          <input id="daysSelected" type="number" readonly/>
        </div>
        <div class="large-2 medium-4 columns">
          <label>Vacation Days Remaining</label>
          <input id="daysLeft" type="number" readonly/>
        </div>
      </div>
      <div class="row">
        <div class="large-6 medium-4 columns">
          <label>Start Date</label>
          <input type="date" id="startDate" />
        </div>
        <div class="large-6 medium-4 columns">
          <label>End Date</label>
          <input type="date" id="endDate" />
        </div>
      </div>
      <div class="row">
        <div class="large-6 medium-4 columns">
          <legend>When would you like to be alerted?</legend>
          <input type="radio" name="alert" value="alertOne" checked="checked"><label>1 Day Before</label>
          <input type="radio" name="alert" value="alertFour"><label>4 Days Before</label>
          <input type="radio" name="alert" value="alertWeek"><label>1 Week Before</label>
        </div>
        <div class="large-6 medium-4 columns">
          <legend>Is this Vacation or Business Travel?</legend>
          <input type="radio" name="isVacation" value="vacation" checked="checked"><label>Vacation</label>
          <input type="radio" name="isVacation" value="travel"><label>Business Travel</label>
        </div>
      </div>
      <div class="row">
        <button id="notifyBtn" class="success button" type="button">Add Event</button>
      </div>
      <button id="addCloseBtn" class="close-button" type="button" unselectable="on">
          <span aria-hidden="true">&times;</span>
        </button>
    </div>
  </div>
  <div id="viewEventModal" class="reveal-modal large-centered" data-reveal aria-labelledby="modalTitle" aria-hidden="true"
    role="dialog" data-close-on-click="true">
    <div class="callout secondary" data-closeable>
      <h1>View Event</h1>
      <div class="row">
        <div class="large-6 medium-4 columns">
          <label>Event Title</label>
          <input id="eventTitle" type="text" />
        </div>
        <div class="large-6 medium-4 columns">
          <label>Event Description</label>
          <input id="eventDescription" type="text" />
        </div>
      </div>
      <div class="row">
        <div class="large-6 medium-4 columns">
          <label>Start Date</label>
          <input type="date" id="viewStartDate" />
        </div>
        <div class="large-6 medium-4 columns">
          <label>End Date</label>
          <input type="date" id="viewEndDate" />
        </div>
      </div>
      <div class="row">
        <button id="changeEventBtn" class="success button" unselectable="on">Change Event</button>
        <button id="deleteBtn" class="alert button" unselectable="on">Remove Event</button>
      </div>
      <button id="viewEventCloseBtn" class="close-button" type="button" unselectable="on">
          <span aria-hidden="true">&times;</span>
        </button>
    </div>
  </div>

  <!--Create a new user modal-->
  <div id="createProfileModal" class="reveal-modal large-centered" data-reveal aria-labelledby="modalTitle" aria-hidden="true"
    role="dialog" data-close-on-click="false">
    <form data-abide name="createProfile">
      <div class="callout secondary" data-closable>
        <h1>Create a New Profile</h1>
        <div class="row">
          <div class="large-6 medium-6 columns">
            <label>First Name</label>
            <input type="text" id="firstName" required/>
          </div>
          <div class="large-6 medium-6 columns">
            <label>Last Name</label>
            <input type="text" id="lastName" required/>
          </div>
        </div>
        <div class="row">
          <div class="large-6 medium-6 columns">
            <label>Email Address</label>
            <input type="email" id="emailAddress" required/>
          </div>
          <div class="large-6 medium-6 columns">
            <label>Verify Email Address</label>
            <input type="email" id="emailAddressVerify" required autocomplete="off"/>
          </div>
        </div>
        <div class="row">
          <fieldset class="large-6 columns">
            <form id="managerRadioBtn">
              <legend>Are You a Manager?</legend>
              <input type="radio" name="managerLabel" value="Yes"><label>Yes</label>
              <input type="radio" name="managerLabel" value="No"><label>No</label>
            </form>
          </fieldset>
        </div>
        <div class="row" id="selectManagerRow">
          <div class="large-12 columns">
            <label>Select Manager</label>
            <select>
                <option value="Manager1" required>Michael Eilers </option>
              </select>
          </div>
        </div>
        <div class="row">
          <div class="large-6 medium-4 columns">
            <label>Number of Total Vacation Days</label>
            <input type="number" id="vacationDaysTotal" />
          </div>
          <div class="large-6 medium-4 columns">
            <label>Number of Used Vacation Days</label>
            <input type="number" id="vacationDaysUsed" />
          </div>
        </div>
        <div class="row">
          <a href="index.html"><button id="createBtn" class="success button" type="submit" unselectable="on">Create</button></a>
        </div>
        <button id="createCloseBtn" class="close-button" unselectable="on">
    		<span aria-hidden="true">&times;</span>
  		</button>
      </div>
    </form>
  </div>
</body>
</html>